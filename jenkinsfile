pipeline {
    agent any
    	tools { 
		maven 'maven-3.6.2' 
		jdk 'JDK8' 
	    }	
	stages{
		
		stage('Recursos') {
			steps {
				git url: 'https://github.com/CursoCI/ejercicioJenkinsFile.git', branch: 'desarrollo'
			}
		}
		
		
		stage('Configuracion sin Test') {
			steps {
				bat 'mvn install -DskipTests' 
			}
		}
		
		stage('Test Unitarios') {
			steps {
					bat 'mvn test' 
				}
				
			post {
				success {
					junit testResults: '**/target/surefire-reports/TEST-*.xml'
					archiveArtifacts 'target/*.jar'
				}
			}
		  
		}
		
		
	}
}
